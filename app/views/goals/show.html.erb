<p id="notice"><%= notice %></p>
<h1>  <%= @goal.name %> [<%= number_to_percentage(@goal.percent_goal_completed, :precision => 2) %>]</h1> 
<h2>[<%= pluralize(@goal.count, 'time') %>  <%= @goal.frequency.downcase %>] </h2>

<span style="float: right">
  <%= link_to 'Log Activity', new_log_path(:goal => @goal.id), class: "btn" %>
  <%= link_to 'Edit Goal', edit_goal_path(@goal), class: "btn" %>
  <%= link_to 'All Goals', goals_path, class: "btn" %> 
</span>
<h3>Last 7 Days</h3>
<table class="table table-striped table-bordered">
  <thead>
    <th>Activity Date</th>
    <th>Description</th>
  </thead>
<% @goal.last_7_days_logs.each do |log| %>
  <tr>
    <td><%= log.activity_date %></td>
    <td><%= link_to log.description, edit_log_path(log) %></td>
  </tr>
<% end %>
</table>

<h3>Goal Tracking</h3>
<table class="table table-striped table-bordered">
  <thead>
    <th>Week</th>
    <th>Completed</th>
  </thead>
  <% (2.months.ago.to_date..Date.today).to_a.reverse.each do |report_date| %>
    <% if report_date == report_date.beginning_of_week %>
      <tr>
        <td><%= report_date %> - <%= report_date.end_of_week %></td>
        <td><%= number_to_percentage((@weekly_logs.fetch(report_date, []).size.to_f / @goal.weekly_frequency) * 100, :precision => 2) %></td>
      </tr>
    <% end %>
  <% end %>
    <%# <tr style="font-weight: bold"> %>
    <%#   <td>Total</td> %>
    <%#   <td>100%</td> %>
    <%# </tr> %>
</table>

